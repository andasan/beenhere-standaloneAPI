(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[8],{142:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var r=t(139),n=t.n(r),s=t(140),i=t(136),c=t(0),l=t(11),o=function(){var e=Object(c.useState)(!1),a=Object(i.a)(e,2),t=a[0],r=a[1],o=Object(c.useState)(),u=Object(i.a)(o,2),d=u[0],m=u[1],p=Object(l.c)((function(e){return e})).errorStatusCode,f=Object(l.b)(),b=Object(c.useRef)([]),h=Object(c.useCallback)(function(){var e=Object(s.a)(n.a.mark((function e(a){var t,s,i,c,l,o,u,d=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>1&&void 0!==d[1]?d[1]:"GET",s=d.length>2&&void 0!==d[2]?d[2]:null,i=d.length>3&&void 0!==d[3]?d[3]:{},r(!0),c=new AbortController,b.current.push(c),e.prev=6,e.next=9,fetch(a,{method:t,body:s,headers:i,signal:c.signal});case 9:return l=e.sent,e.next=12,l.json();case 12:if(o=e.sent,b.current=b.current.filter((function(e){return e!==c})),l.ok){e.next=18;break}throw(u=new Error(o.message)).status=o.code,u;case 18:return r(!1),e.abrupt("return",o);case 22:throw e.prev=22,e.t0=e.catch(6),f({type:"ERR_STATUS_CODE",payload:e.t0.status}),m(e.t0.message),r(!1),e.t0;case 28:case"end":return e.stop()}}),e,null,[[6,22]])})));return function(a){return e.apply(this,arguments)}}(),[]);return Object(c.useEffect)((function(){return function(){b.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:t,error:d,sendRequest:h,clearError:function(){403!==p&&401!==p||f({type:"LOGOUT"}),m(null)}}}},157:function(e,a,t){"use strict";var r=t(136),n=t(21),s=t(0),i=t.n(s),c=t(199),l=t(152);a.a=function(e){var a=e.label,t=(e.setFieldValue,Object(n.a)(e,["label","setFieldValue"])),s=Object(l.d)(t),o=Object(r.a)(s,2),u=o[0],d=o[1];switch(t.type){case"text":case"email":case"password":return i.a.createElement("div",{className:"input-field col s12"},i.a.createElement("input",Object.assign({},u,t)),i.a.createElement("label",{className:"white-text active",htmlFor:t._id||t.name},a),d.touched&&d.error?i.a.createElement("span",{className:"helper-text","data-error":d.error},d.error):null);default:return i.a.createElement("div",{className:"input-field col s12"},i.a.createElement(c.a,Object.assign({className:"materialize-textarea"},u,t,{id:"text-area"})),i.a.createElement("label",{className:"white-text active",htmlFor:t._id||t.name},a),d.touched&&d.error?i.a.createElement("div",{className:"meta-error"},d.error):null)}}},192:function(e,a,t){"use strict";t.d(a,"b",(function(){return s})),t.d(a,"a",(function(){return i})),t.d(a,"c",(function(){return c}));var r=t(194),n=["image/jpg","image/jpeg","image/gif","image/png"],s=r.b({title:r.d().min(3,"Must be at least 3 characters").required("A title is required"),description:r.d().required("A description is required"),address:r.d().required("An address is required"),file:r.a().required("Image is required").test("fileSize","File too large. Image upload size limit is 3MB.",(function(e){return e&&e.size<=3e6})).test("fileFormat","Unsupported Format",(function(e){return e&&n.includes(e.type)}))}),i=r.b({email:r.d().email("Email is invalid").required("Email is required"),password:r.d().min(8,"Password has to be longer than 6 characters!").required("Please Enter your password").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/,"Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and one special case Character")}),c=r.b({username:r.d().required("Username is required").min(3,"Must be at least 3 characters long"),email:r.d().email("Email is invalid").required("Email is required"),file:r.a().required("Avatar is required").test("fileSize","File too large. Image upload size limit is 3MB.",(function(e){return e&&e.size<=3e6})).test("fileFormat","Unsupported Format",(function(e){return e&&n.includes(e.type)})),password:r.d().min(8,"Password has to be longer than 6 characters!").required("Please Enter your password").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/,"Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and one special case Character"),confirmPassword:r.d().oneOf([r.c("password"),null],"Passwords are not the same!").required("Password confirmation is required!")})},200:function(e,a,t){"use strict";var r=t(36),n=t(136),s=t(0),i=t.n(s),c=t(271),l=t(265),o=t(276),u=t(223),d=t.n(u),m=function(e){return{hidden:{display:"none"},container:{margin:"auto",marginBottom:"30px"},title:{margin:"auto",display:"flex",justifyContent:"center",padding:e.spacing(2)},errorMsg:{margin:"auto",display:"flex",justifyContent:"center",padding:e.spacing(2)},bigAvatar:{margin:"auto",width:140,height:140,borderStyle:"solid",borderSize:"1px",cursor:"pointer"},avatarThumb:{width:"100%",height:"100%",objectFit:"cover"},primaryBack:{background:"#FFF"},whiteBack:{background:"white"},errorBack:{background:e.palette.error.main}}},p=t(2),f=t.n(p);a.a=d()(m)((function(e){var a=Object(s.useRef)(),t=Object(s.useState)(),u=Object(n.a)(t,2),d=u[0],m=u[1],p=Object(s.useState)(),b=Object(n.a)(p,2),h=b[0],g=b[1],v=e.errorMessage,w=e.title,E=e.classes,O=e.field,j=O.name,y=O.onBlur,k=f()(E.bigAvatar,d?[E.whiteBack]:[E.primaryBack],Object(r.a)({},E.errorBack,v));return i.a.createElement("div",{className:E.container},i.a.createElement("input",{className:E.hidden,id:j,name:j,type:"file",onChange:function(a){a.preventDefault();var t=new FileReader,r=a.target.files[0];r&&(t.onloadend=function(){m(r),g(t.result)},t.readAsDataURL(r),e.setFieldValue(e.field.name,r))},ref:a,accept:".jpg,.jpeg,.png,.gif",onBlur:y}),i.a.createElement(c.a,{className:E.title,variant:"h5"},w),i.a.createElement(o.a,{className:k,onClick:function(){a&&a.current.click()}},v?i.a.createElement(l.a,{style:{fontSize:36}},"error_outline"):d?i.a.createElement("img",{className:E.avatarThumb,src:h,alt:"..."}):i.a.createElement(l.a,{style:{fontSize:36,color:"#e65100"}},"image")),v?i.a.createElement(c.a,{className:E.errorMsg,variant:"caption",color:"error"},v):null)}))},273:function(e,a,t){"use strict";t.r(a);var r=t(139),n=t.n(r),s=t(140),i=t(136),c=t(0),l=t.n(c),o=t(4),u=t(152),d=t(11),m=t(157),p=t(200),f=t(142),b=t(35),h=t(192);a.default=function(){var e=Object(c.useState)(!0),a=Object(i.a)(e,2),t=a[0],r=a[1],g=Object(c.useState)(!1),v=Object(i.a)(g,2),w=v[0],E=v[1],O=Object(f.a)(),j=O.isLoading,y=O.error,k=O.sendRequest,S=O.clearError,x=Object(d.b)(),N=Object(o.g)(),F=function(){var e=Object(s.a)(n.a.mark((function e(a){var r,s,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=13;break}return e.prev=1,e.next=4,k("".concat("https://beenhere-v2.herokuapp.com","/api/users/login"),"POST",JSON.stringify({email:a.email,password:a.password}),{"Content-Type":"application/json"});case 4:r=e.sent,x({type:"LOGIN",payload:{user:r.user,userId:r.user._id,token:r.token}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),E(!0);case 11:e.next=29;break;case 13:return(s=new FormData).append("username",a.username),s.append("email",a.email),s.append("image",a.file),s.append("password",a.password),e.prev=18,e.next=21,k("".concat("https://beenhere-v2.herokuapp.com","/api/users/signup"),"POST",s);case 21:i=e.sent,N.push("/"),x({type:"LOGIN",payload:{user:i.user,userId:i.user._id,token:i.token}}),e.next=29;break;case 26:e.prev=26,e.t1=e.catch(18),E(!0);case 29:case"end":return e.stop()}}),e,null,[[1,8],[18,26]])})));return function(a){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(b.c,{isLoading:j}),l.a.createElement(b.b,{isError:w,errorHandler:function(){S(),E(!1)},error:y}),l.a.createElement(u.c,{initialValues:{username:"",email:"",file:void 0,password:"",confirmPassword:""},validationSchema:t?h.a:h.c,onSubmit:function(e,a){var t=a.setSubmitting,r=a.resetForm,n=a.submitForm;t(!1),r(),n(),F(e)}},(function(e){e.values;var a=e.errors,n=e.touched,s=(e.handleSubmit,e.handleChange,e.handleBlur),i=e.setFieldValue,c=e.isSubmitting,o=e.resetForm;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s6 offset-s3"},l.a.createElement(u.b,null,l.a.createElement("h1",null,t?"Sign In":"Sign Up"),!t&&l.a.createElement(u.a,{name:"file",component:p.a,title:"Select a file",setFieldValue:i,errorMessage:a.file?a.file:void 0,touched:n.file,style:{display:"flex"},onBlur:s}),!t&&l.a.createElement(m.a,{label:"Username",name:"username",type:"text"}),l.a.createElement(m.a,{label:"Email",name:"email",type:"email"}),l.a.createElement(m.a,{label:"Password",name:"password",type:"password"}),!t&&l.a.createElement(m.a,{label:"Confirm Password",name:"confirmPassword",type:"password"}),l.a.createElement("button",{className:"waves-effect waves-light btn white-text green darken-4",type:"submit",disabled:c},c?"Loading...":"Submit",l.a.createElement("i",{className:"material-icons right"},"send"))))),l.a.createElement("div",{className:"divider row"}),l.a.createElement("div",{className:"col s6 offset-s3 center white-text"},t?"Don't have an account yet? ":"Already have an account? ",l.a.createElement("button",{className:"waves-effect waves-light btn-small deep-orange-text white accent-2 center",type:"reset",onClick:function(){r((function(e){return!e})),o()}},"Switch to ",t?"Sign Up":"Sign In")))})))}}}]);
//# sourceMappingURL=8.b6d54b2c.chunk.js.map