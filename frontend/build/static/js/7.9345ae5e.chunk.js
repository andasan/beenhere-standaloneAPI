(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[7],{142:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a(139),n=a.n(r),i=a(140),s=a(136),c=a(0),l=a(11),o=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1],o=Object(c.useState)(),u=Object(s.a)(o,2),d=u[0],m=u[1],p=Object(l.c)((function(e){return e})).errorStatusCode,f=Object(l.b)(),b=Object(c.useRef)([]),h=Object(c.useCallback)(function(){var e=Object(i.a)(n.a.mark((function e(t){var a,i,s,c,l,o,u,d=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>1&&void 0!==d[1]?d[1]:"GET",i=d.length>2&&void 0!==d[2]?d[2]:null,s=d.length>3&&void 0!==d[3]?d[3]:{},r(!0),c=new AbortController,b.current.push(c),e.prev=6,e.next=9,fetch(t,{method:a,body:i,headers:s,signal:c.signal});case 9:return l=e.sent,e.next=12,l.json();case 12:if(o=e.sent,b.current=b.current.filter((function(e){return e!==c})),l.ok){e.next=18;break}throw(u=new Error(o.message)).status=o.code,u;case 18:return r(!1),e.abrupt("return",o);case 22:throw e.prev=22,e.t0=e.catch(6),f({type:"ERR_STATUS_CODE",payload:e.t0.status}),m(e.t0.message),r(!1),e.t0;case 28:case"end":return e.stop()}}),e,null,[[6,22]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(c.useEffect)((function(){return function(){b.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:a,error:d,sendRequest:h,clearError:function(){403!==p&&401!==p||f({type:"LOGOUT"}),m(null)}}}},157:function(e,t,a){"use strict";var r=a(136),n=a(21),i=a(0),s=a.n(i),c=a(199),l=a(152);t.a=function(e){var t=e.label,a=(e.setFieldValue,Object(n.a)(e,["label","setFieldValue"])),i=Object(l.d)(a),o=Object(r.a)(i,2),u=o[0],d=o[1];switch(a.type){case"text":case"email":case"password":return s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",Object.assign({},u,a)),s.a.createElement("label",{className:"white-text active",htmlFor:a._id||a.name},t),d.touched&&d.error?s.a.createElement("span",{className:"helper-text","data-error":d.error},d.error):null);default:return s.a.createElement("div",{className:"input-field col s12"},s.a.createElement(c.a,Object.assign({className:"materialize-textarea"},u,a,{id:"text-area"})),s.a.createElement("label",{className:"white-text active",htmlFor:a._id||a.name},t),d.touched&&d.error?s.a.createElement("div",{className:"meta-error"},d.error):null)}}},192:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return c}));var r=a(194),n=["image/jpg","image/jpeg","image/gif","image/png"],i=r.b({title:r.d().min(3,"Must be at least 3 characters").required("A title is required"),description:r.d().required("A description is required"),address:r.d().required("An address is required"),file:r.a().required("Image is required").test("fileSize","File too large. Image upload size limit is 3MB.",(function(e){return e&&e.size<=3e6})).test("fileFormat","Unsupported Format",(function(e){return e&&n.includes(e.type)}))}),s=r.b({email:r.d().email("Email is invalid").required("Email is required"),password:r.d().min(8,"Password has to be longer than 6 characters!").required("Please Enter your password").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/,"Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and one special case Character")}),c=r.b({username:r.d().required("Username is required").min(3,"Must be at least 3 characters long"),email:r.d().email("Email is invalid").required("Email is required"),file:r.a().required("Avatar is required").test("fileSize","File too large. Image upload size limit is 3MB.",(function(e){return e&&e.size<=3e6})).test("fileFormat","Unsupported Format",(function(e){return e&&n.includes(e.type)})),password:r.d().min(8,"Password has to be longer than 6 characters!").required("Please Enter your password").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/,"Must Contain 8 Characters, One Uppercase, One Lowercase, One Number and one special case Character"),confirmPassword:r.d().oneOf([r.c("password"),null],"Passwords are not the same!").required("Password confirmation is required!")})},200:function(e,t,a){"use strict";var r=a(36),n=a(136),i=a(0),s=a.n(i),c=a(271),l=a(265),o=a(276),u=a(223),d=a.n(u),m=function(e){return{hidden:{display:"none"},container:{margin:"auto",marginBottom:"30px"},title:{margin:"auto",display:"flex",justifyContent:"center",padding:e.spacing(2)},errorMsg:{margin:"auto",display:"flex",justifyContent:"center",padding:e.spacing(2)},bigAvatar:{margin:"auto",width:140,height:140,borderStyle:"solid",borderSize:"1px",cursor:"pointer"},avatarThumb:{width:"100%",height:"100%",objectFit:"cover"},primaryBack:{background:"#FFF"},whiteBack:{background:"white"},errorBack:{background:e.palette.error.main}}},p=a(2),f=a.n(p);t.a=d()(m)((function(e){var t=Object(i.useRef)(),a=Object(i.useState)(),u=Object(n.a)(a,2),d=u[0],m=u[1],p=Object(i.useState)(),b=Object(n.a)(p,2),h=b[0],g=b[1],v=e.errorMessage,E=e.title,O=e.classes,w=e.field,j=w.name,y=w.onBlur,k=f()(O.bigAvatar,d?[O.whiteBack]:[O.primaryBack],Object(r.a)({},O.errorBack,v));return s.a.createElement("div",{className:O.container},s.a.createElement("input",{className:O.hidden,id:j,name:j,type:"file",onChange:function(t){t.preventDefault();var a=new FileReader,r=t.target.files[0];r&&(a.onloadend=function(){m(r),g(a.result)},a.readAsDataURL(r),e.setFieldValue(e.field.name,r))},ref:t,accept:".jpg,.jpeg,.png,.gif",onBlur:y}),s.a.createElement(c.a,{className:O.title,variant:"h5"},E),s.a.createElement(o.a,{className:k,onClick:function(){t&&t.current.click()}},v?s.a.createElement(l.a,{style:{fontSize:36}},"error_outline"):d?s.a.createElement("img",{className:O.avatarThumb,src:h,alt:"..."}):s.a.createElement(l.a,{style:{fontSize:36,color:"#e65100"}},"image")),v?s.a.createElement(c.a,{className:O.errorMsg,variant:"caption",color:"error"},v):null)}))},264:function(e,t,a){"use strict";a.r(t);var r=a(139),n=a.n(r),i=a(140),s=a(136),c=a(0),l=a.n(c),o=a(4),u=a(152),d=a(11),m=a(157),p=a(200),f=a(142),b=a(35),h=a(192);t.default=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1],g=Object(f.a)(),v=g.isLoading,E=g.error,O=g.sendRequest,w=g.clearError,j=Object(d.c)((function(e){return e})),y=j.userId,k=j.token,q=Object(o.g)(),x=function(){var e=Object(i.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("title",t.title),a.append("description",t.description),a.append("address",t.address),a.append("creator",t.creator),a.append("image",t.file),e.prev=6,e.next=9,O("".concat("https://beenhere-v2.herokuapp.com","/api/places/"),"POST",a,{Authorization:"Bearer "+k});case 9:q.push("/".concat(y,"/places")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),r(!0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement(b.c,{isLoading:v}),l.a.createElement(b.b,{isError:a,errorHandler:function(){w(),r(!1)},error:E}),l.a.createElement(u.c,{initialValues:{title:"",description:"",address:"",creator:y,file:void 0},validationSchema:h.b,onSubmit:function(e,t){var a=t.setSubmitting,r=t.resetForm,n=t.submitForm;r(),a(!1),n(),x(e)}},(function(e){var t=e.errors,a=e.touched,r=e.handleBlur,n=e.setFieldValue,i=e.isSubmitting;return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col s6 offset-s3"},l.a.createElement(u.b,null,l.a.createElement("h1",null,"Create a Place"),l.a.createElement(u.a,{name:"file",component:p.a,title:"Select a file",setFieldValue:n,errorMessage:t.file?t.file:void 0,touched:a.file,style:{display:"flex"},onBlur:r}),l.a.createElement(m.a,{label:"Title",name:"title",type:"text"}),l.a.createElement(m.a,{label:"Description",name:"description",type:"textarea"}),l.a.createElement(m.a,{label:"Address",name:"address",type:"text"}),l.a.createElement("button",{className:"waves-effect waves-light btn white-text green darken-4",type:"submit",disabled:i},i?"Loading...":"Submit",l.a.createElement("i",{className:"material-icons right"},"send")))))})))}}}]);
//# sourceMappingURL=7.9345ae5e.chunk.js.map