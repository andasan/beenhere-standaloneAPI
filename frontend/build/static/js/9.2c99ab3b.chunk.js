(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[9],{142:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var a=r(139),n=r.n(a),c=r(140),i=r(136),s=r(0),u=r(11),l=function(){var e=Object(s.useState)(!1),t=Object(i.a)(e,2),r=t[0],a=t[1],l=Object(s.useState)(),o=Object(i.a)(l,2),p=o[0],d=o[1],m=Object(u.c)((function(e){return e})).errorStatusCode,b=Object(u.b)(),f=Object(s.useRef)([]),h=Object(s.useCallback)(function(){var e=Object(c.a)(n.a.mark((function e(t){var r,c,i,s,u,l,o,p=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"GET",c=p.length>2&&void 0!==p[2]?p[2]:null,i=p.length>3&&void 0!==p[3]?p[3]:{},a(!0),s=new AbortController,f.current.push(s),e.prev=6,e.next=9,fetch(t,{method:r,body:c,headers:i,signal:s.signal});case 9:return u=e.sent,e.next=12,u.json();case 12:if(l=e.sent,f.current=f.current.filter((function(e){return e!==s})),u.ok){e.next=18;break}throw(o=new Error(l.message)).status=l.code,o;case 18:return a(!1),e.abrupt("return",l);case 22:throw e.prev=22,e.t0=e.catch(6),b({type:"ERR_STATUS_CODE",payload:e.t0.status}),d(e.t0.message),a(!1),e.t0;case 28:case"end":return e.stop()}}),e,null,[[6,22]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(s.useEffect)((function(){return function(){f.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:r,error:p,sendRequest:h,clearError:function(){403!==m&&401!==m||b({type:"LOGOUT"}),d(null)}}}},157:function(e,t,r){"use strict";var a=r(136),n=r(21),c=r(0),i=r.n(c),s=r(199),u=r(152);t.a=function(e){var t=e.label,r=(e.setFieldValue,Object(n.a)(e,["label","setFieldValue"])),c=Object(u.d)(r),l=Object(a.a)(c,2),o=l[0],p=l[1];switch(r.type){case"text":case"email":case"password":return i.a.createElement("div",{className:"input-field col s12"},i.a.createElement("input",Object.assign({},o,r)),i.a.createElement("label",{className:"white-text active",htmlFor:r._id||r.name},t),p.touched&&p.error?i.a.createElement("span",{className:"helper-text","data-error":p.error},p.error):null);default:return i.a.createElement("div",{className:"input-field col s12"},i.a.createElement(s.a,Object.assign({className:"materialize-textarea"},o,r,{id:"text-area"})),i.a.createElement("label",{className:"white-text active",htmlFor:r._id||r.name},t),p.touched&&p.error?i.a.createElement("div",{className:"meta-error"},p.error):null)}}},272:function(e,t,r){"use strict";r.r(t);var a=r(139),n=r.n(a),c=r(140),i=r(136),s=r(0),u=r.n(s),l=r(4),o=r(152),p=r(194),d=r(11),m=r(157),b=r(142),f=r(35);t.default=function(){var e=Object(b.a)(),t=e.isLoading,r=e.error,a=e.sendRequest,h=e.clearError,v=Object(s.useState)(),E=Object(i.a)(v,2),O=E[0],j=E[1],g=Object(s.useState)(!1),w=Object(i.a)(g,2),x=w[0],S=w[1],k=Object(l.h)().pid,y=Object(l.g)(),N=Object(d.c)((function(e){return e})),C=N.userId,T=N.token;Object(s.useEffect)((function(){(function(){var e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("".concat("https://beenhere-v2.herokuapp.com","/api/places/").concat(k));case 3:t=e.sent,j(t.place),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),S(!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[a,k]);var q=function(){var e=Object(c.a)(n.a.mark((function e(t,r){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,a("".concat("https://beenhere-v2.herokuapp.com","/api/places/").concat(k),"PATCH",JSON.stringify({title:r.title,description:r.description}),{"Content-Type":"application/json",Authorization:"Bearer "+T});case 4:y.push("/".concat(C,"/places")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),S(!0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r){return e.apply(this,arguments)}}();if(!O&&!r)return u.a.createElement("div",{className:"row center"},u.a.createElement("h2",null,"Could not find place!"));var A=p.b({title:p.d().min(3,"Must be more than 3 characters").required("A title is require"),description:p.d().required("A description is required")});return u.a.createElement("div",null,u.a.createElement(f.c,{isLoading:t}),u.a.createElement(f.b,{isError:x,errorHandler:function(){h(),S(!1)},error:r}),!t&&O&&u.a.createElement(o.c,{initialValues:O,validationSchema:A,onSubmit:function(e,t){var r=t.setSubmitting;(0,t.resetForm)(),r(!1)}},(function(e){return u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col s6 offset-s3"},u.a.createElement(o.b,{onSubmit:function(t){return q(t,e.values)}},u.a.createElement("h1",null,"Edit a Place"),u.a.createElement(m.a,{label:"Title",name:"title",type:"text"}),u.a.createElement(m.a,{label:"Description",name:"description",type:"textarea"}),u.a.createElement("button",{className:"waves-effect waves-light btn white-text green darken-4",type:"submit",disabled:!!e.isSubmitting},e.isSubmitting?"Loading...":"Submit",u.a.createElement("i",{className:"material-icons right"},"send")))))})))}}}]);
//# sourceMappingURL=9.2c99ab3b.chunk.js.map